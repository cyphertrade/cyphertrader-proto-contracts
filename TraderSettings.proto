syntax = "proto3";
package trader_settings;
import "google/protobuf/empty.proto";

enum TraderSettingsGrpcError {
    VALIDATION_ERROR = 0;
    CONTEST_SETTINGS_NOT_FOUND = 1;
    USER_GROUP_NOT_FOUND = 2;
    DATABASE_ERROR = 3;
}

message TraderProfileContestSettingsGrpcModel {
    string Name = 1;
    string PlatformCommission = 2;
    string MinCreatorCommissionPercent = 3;
    string MaxCreatorCommissionPercent = 4;
    string MinContestParticipants = 5;
    string MaxContestParticipants = 6;
    string MinLeverage = 7;
    string MaxLeverage = 8;
    string MinInitialBalance = 9;
    string MaxInitialBalance = 10;
    int64 MinContestDuration = 11;
    int64 MaxContestDuration = 12;
    string MinContestBuyIn = 13;
    string MaxContestBuyIn = 14;
    repeated string AllowedDifficulties = 15;
    repeated string AllowedBrokers = 16;
    repeated string AllowedInstruments = 17;
    optional uint64 MaxInitialPrizePool = 18;
}

message TraderProfileGrpcRequestModel {
    string Id = 1;
    string Name = 2;
    optional string BaseContestSettings = 3;
    map<uint32, string> ProgressiveContestSettings = 4;
}

message TraderProfileGrpcResponseModel {
    string Id = 1;
    string Name = 2;
    optional TraderProfileContestSettingsGrpcModel BaseContestSettings = 3;
    map<uint32, TraderProfileContestSettingsGrpcModel> ProgressiveContestSettings = 4;
}

message InsertOrReplaceTraderProfileGrpcResponse {
    oneof InsertOrReplaceTraderProfileResult {
        TraderProfileGrpcResponseModel TraderProfile = 1;
        TraderSettingsGrpcError Error = 2;
    }
}

message SystemDefaultsGrpcRequestModel {
    optional string DefaultUserGroup = 1;
}

message SystemDefaultsGrpcResponseModel {
    optional string DefaultUserGroup = 1;
}

message InsertOrReplaceSystemDefaultsGrpcResponse {
    oneof InsertOrReplaceSystemDefaultsResult {
        SystemDefaultsGrpcResponseModel SystemDefaults = 1;
        TraderSettingsGrpcError Error = 2;
    }
}

service TraderSettingsGrpcService {
    rpc InsertOrReplaceTraderProfile(TraderProfileGrpcRequestModel) returns (InsertOrReplaceTraderProfileGrpcResponse);
    rpc InsertOrReplaceSystemDefaults(SystemDefaultsGrpcRequestModel) returns (InsertOrReplaceSystemDefaultsGrpcResponse);
    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}